<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-azure/node_modules/azure/runtime/ms-rest/lib/webResource.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-azure">npmtest-azure (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-azure/node_modules/azure/runtime/ms-rest/lib/webResource.js</span></h1>
    <h2>
        
        Statements: <span class="metric">6.25% <small>(7 / 112)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 130)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 6)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">6.25% <small>(7 / 112)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-azure/node_modules/azure/runtime/ms-rest/lib/</a> &#187; webResource.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">﻿// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License. See License.txt in the project root for license information. 
&nbsp;
// Module dependencies.
const utils = require('./utils');
const Constants = require('./constants');
const HttpConstants = Constants.HttpConstants;
const HttpVerbs = HttpConstants.HttpVerbs;
const serializer = require('./serialization');
&nbsp;
/**
 * Creates a new WebResource object.
 *
 * This class provides an abstraction over a REST call by being library / implementation agnostic and wrapping the necessary
 * properties to initiate a request.
 *
 * @constructor
 */
class WebResource {
  constructor<span class="fstat-no" title="function not covered" >() {</span>
<span class="cstat-no" title="statement not covered" >    this.rawResponse = false;</span>
<span class="cstat-no" title="statement not covered" >    this.queryString = {};</span>
<span class="cstat-no" title="statement not covered" >    this.url = null;</span>
<span class="cstat-no" title="statement not covered" >    this.method = null;</span>
<span class="cstat-no" title="statement not covered" >    this.headers = {};</span>
<span class="cstat-no" title="statement not covered" >    this.body = null;</span>
  }
&nbsp;
  /**
   * Hook up the given input stream to a destination output stream if the WebResource method
   * requires a request body and a body is not already set.
   *
   * @param {Stream} inputStream the stream to pipe from
   * @param {Stream} outputStream the stream to pipe to
   *
   * @return destStream
   */
  pipeInput<span class="fstat-no" title="function not covered" >(inputStream, destStream) {</span>
<span class="fstat-no" title="function not covered" >    function isMethodWithBody(verb) {</span>
<span class="cstat-no" title="statement not covered" >      return verb === HttpVerbs.PUT ||</span>
        verb === HttpVerbs.POST ||
        verb === HttpVerbs.MERGE;
    }
<span class="cstat-no" title="statement not covered" >    if (isMethodWithBody(this.method) &amp;&amp; !this.hasOwnProperty('body')) {</span>
<span class="cstat-no" title="statement not covered" >      inputStream.pipe(destStream);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return destStream;</span>
  }
&nbsp;
  /**
   * Validates that the required properties such as method, url, headers['Content-Type'], 
   * headers['accept-language'] are defined. It will throw an error if one of the above
   * mentioned properties are not defined.
   */
  validateRequestProperties<span class="fstat-no" title="function not covered" >() {</span>
<span class="cstat-no" title="statement not covered" >    if (!this.method || !this.url || !this.headers['Content-Type'] || !this.headers['accept-language']) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('method, url, headers[\'Content-Type\'], headers[\'accept-language\'] are ' +</span>
        'required properties before making a request. Either provide them or use WebResource.prepare() method.');
    }
  }
&nbsp;
  /**
   * Prepares the request.
   *
   * @param {object} options The request options that should be provided to send a request successfully
   *
   * @param {string} options.method The HTTP request method. Valid values are 'GET', 'PUT', 'HEAD', 'DELETE', 'OPTIONS', 'POST', 'PATCH'.
   *
   * @param {string} [options.url] The request url. It may or may not have query parameters in it. 
   * Either provide the 'url' or provide the 'pathTemplate' in the options object. Both the options are mutually exclusive.
   *
   * @param {object} [options.queryParameters] A dictionary of query parameters to be appended to the url, where 
   * the 'key' is the 'query-parameter-name' and the 'value' is the 'query-parameter-value'. 
   * The 'query-parameter-value' can be of type 'string' or it can be of type 'object'. 
   * The 'object' format should be used when you want to skip url encoding. While using the object format, 
   * the object must have a property named value which provides the 'query-parameter-value'.
   * Example: 
   *    - query-parameter-value in 'object' format: { 'query-parameter-name': { value: 'query-parameter-value', skipUrlEncoding: true } }
   *    - query-parameter-value in 'string' format: { 'query-parameter-name': 'query-parameter-value'}.
   * Note: 'If options.url already has some query parameters, then the value provided in options.queryParameters will be appended to the url.
   *
   * @param {string} [options.pathTemplate] The path template of the request url. Either provide the 'url' or provide the 'pathTemplate' 
   * in the options object. Both the options are mutually exclusive.
   * Example: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Storage/storageAccounts/{accountName}'
   *
   * @param {string} [options.baseUrl] The base url of the request. Default value is: 'https://management.azure.com'. This is applicable only with 
   * options.pathTemplate. If you are providing options.url then it is expected that you provide the complete url.
   *
   * @param {object} [options.pathParameters] A dictionary of path parameters that need to be replaced with actual values in the pathTemplate.
   * Here the key is the 'path-parameter-name' and the value is the 'path-parameter-value'. 
   * The 'path-parameter-value' can be of type 'string'  or it can be of type 'object'.
   * The 'object' format should be used when you want to skip url encoding. While using the object format, 
   * the object must have a property named value which provides the 'path-parameter-value'.
   * Example: 
   *    - path-parameter-value in 'object' format: { 'path-parameter-name': { value: 'path-parameter-value', skipUrlEncoding: true } }
   *    - path-parameter-value in 'string' format: { 'path-parameter-name': 'path-parameter-value' }.
   *
   * @param {object} [options.headers] A dictionary of request headers that need to be applied to the request.
   * Here the key is the 'header-name' and the value is the 'header-value'. The header-value MUST be of type string.
   *  - ContentType must be provided with the key name as 'Content-Type'. Default value 'application/json; charset=utf-8'.
   *  - 'Transfer-Encoding' is set to 'chunked' by default if 'options.bodyIsStream' is set to true.
   *  - 'Content-Type' is set to 'application/octet-stream' by default if 'options.bodyIsStream' is set to true.
   *  - 'accept-language' by default is set to 'en-US'
   *  - 'x-ms-client-request-id' by default is set to a new Guid. To not generate a guid for the request, please set options.disableClientRequestId to true
   *
   * @param {boolean} [options.disableClientRequestId] When set to true, instructs the client to not set 'x-ms-client-request-id' header to a new Guid().
   *
   * @param {object|string|boolean|array|number|null|undefined} [options.body] - The request body. It can be of any type. This method will JSON.stringify() the request body.
   *
   * @param {object} [options.serializationMapper] - Provides information on how to serialize the request body.
   * 
   * @param {object} [options.deserializationMapper] - Provides information on how to deserialize the response body.
   * 
   * @param {boolean} [options.disableJsonStringifyOnBody] - Indicates whether this method should JSON.stringify() the request body. Default value: false.
   *
   * @param {boolean} [options.bodyIsStream] - Indicates whether the request body is a stream (useful for file upload scenarios).
   *
   * @returns {object} WebResource Returns the prepared WebResource (HTTP Request) object that needs to be given to the request pipeline.
   */
  prepare<span class="fstat-no" title="function not covered" >(options) {</span>
<span class="cstat-no" title="statement not covered" >    if (options === null || options === undefined || typeof options !== 'object') {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('options cannot be null or undefined and must be of type object');</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (options.method === null || options.method === undefined || typeof options.method.valueOf() !== 'string') {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('options.method cannot be null or undefined and it must be of type string.');</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (options.url &amp;&amp; options.pathTemplate) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('options.url and options.pathTemplate are mutually exclusive. Please provide either of them.');</span>
    }
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >    if ((options.pathTemplate === null || options.pathTemplate === undefined || typeof options.pathTemplate.valueOf() !== 'string') &amp;&amp; (options.url === null || options.url === undefined || typeof options.url.valueOf() !== 'string')) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('Please provide either options.pathTemplate or options.url. Currently none of them were provided.');</span>
    }
&nbsp;
    //set the url if it is provided.
<span class="cstat-no" title="statement not covered" >    if (options.url) {</span>
<span class="cstat-no" title="statement not covered" >      if (typeof options.url !== 'string') {</span>
<span class="cstat-no" title="statement not covered" >        throw new Error('options.url must be of type \'string\'.');</span>
      }
<span class="cstat-no" title="statement not covered" >      this.url = options.url;</span>
    }
&nbsp;
    //set the method
<span class="cstat-no" title="statement not covered" >    if (options.method) {</span>
<span class="cstat-no" title="statement not covered" >      let validMethods = ['GET', 'PUT', 'HEAD', 'DELETE', 'OPTIONS', 'POST', 'PATCH', 'TRACE'];</span>
<span class="cstat-no" title="statement not covered" >      if (validMethods.indexOf(options.method.toUpperCase()) === -1) {</span>
<span class="cstat-no" title="statement not covered" >        throw new Error('The provided method \'' + options.method + '\' is invalid. Supported HTTP methods are: ' + JSON.stringify(validMethods));</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    this.method = options.method.toUpperCase();</span>
&nbsp;
    //construct the url if path template is provided
<span class="cstat-no" title="statement not covered" >    if (options.pathTemplate) {</span>
<span class="cstat-no" title="statement not covered" >      if (typeof options.pathTemplate !== 'string') {</span>
<span class="cstat-no" title="statement not covered" >        throw new Error('options.pathTemplate must be of type \'string\'.');</span>
      }
<span class="cstat-no" title="statement not covered" >      if (!options.baseUrl) {</span>
<span class="cstat-no" title="statement not covered" >        options.baseUrl = 'https://management.azure.com';</span>
      }
<span class="cstat-no" title="statement not covered" >      let baseUrl = options.baseUrl;</span>
<span class="cstat-no" title="statement not covered" >      let url = baseUrl + (baseUrl.endsWith('/') ? '' : '/') + (options.pathTemplate.startsWith('/') ? options.pathTemplate.slice(1) : options.pathTemplate);</span>
<span class="cstat-no" title="statement not covered" >      let segments = url.match(/({\w*\s*\w*})/ig);</span>
<span class="cstat-no" title="statement not covered" >      if (segments &amp;&amp; segments.length) {</span>
<span class="cstat-no" title="statement not covered" >        if (options.pathParameters === null || options.pathParameters === undefined || typeof options.pathParameters !== 'object') {</span>
<span class="cstat-no" title="statement not covered" >          throw new Error(`pathTemplate: ${options.pathTemplate} has been provided. Hence, options.pathParameters ` +</span>
            `cannot be null or undefined and must be of type "object".`);
        }
<span class="cstat-no" title="statement not covered" >        segments.forEach(<span class="fstat-no" title="function not covered" >function (item) {</span></span>
<span class="cstat-no" title="statement not covered" >          let pathParamName = item.slice(1, -1);</span>
<span class="cstat-no" title="statement not covered" >          let pathParam = options.pathParameters[pathParamName];</span>
<span class="cstat-no" title="statement not covered" >          if (pathParam === null || pathParam === undefined || !(typeof pathParam === 'string' || typeof pathParam === 'object')) {</span>
<span class="cstat-no" title="statement not covered" >            throw new Error(`pathTemplate: ${options.pathTemplate} contains the path parameter ${pathParamName}` + </span>
              ` however, it is not present in ${options.pathParameters} - ${JSON.stringify(options.pathParameters, null, 2)}.` +
              `The value of the path parameter can either be a "string" of the form { ${pathParamName}: "some sample value" } or ` +
              `it can be an "object" of the form { "${pathParamName}": { value: "some sample value", skipUrlEncoding: true } }.`);
          }
&nbsp;
<span class="cstat-no" title="statement not covered" >          if (typeof pathParam.valueOf() === 'string') {</span>
<span class="cstat-no" title="statement not covered" >            url = url.replace(item, encodeURIComponent(pathParam));</span>
          }
&nbsp;
<span class="cstat-no" title="statement not covered" >          if (typeof pathParam.valueOf() === 'object') {</span>
<span class="cstat-no" title="statement not covered" >            if (!pathParam.value) {</span>
<span class="cstat-no" title="statement not covered" >              throw new Error(`options.pathParameters[${pathParamName}] is of type "object" but it does not contain a "value" property.`);</span>
            }
<span class="cstat-no" title="statement not covered" >            if (pathParam.skipUrlEncoding) {</span>
<span class="cstat-no" title="statement not covered" >              url = url.replace(item, pathParam.value);</span>
            } else {
<span class="cstat-no" title="statement not covered" >              url = url.replace(item, encodeURIComponent(pathParam.value));</span>
            }
          }
        });
      }
<span class="cstat-no" title="statement not covered" >      this.url = url;</span>
    }
&nbsp;
    //append query parameters to the url if they are provided. They can be provided with pathTemplate or url option.
<span class="cstat-no" title="statement not covered" >    if (options.queryParameters) {</span>
<span class="cstat-no" title="statement not covered" >      if (typeof options.queryParameters !== 'object') {</span>
<span class="cstat-no" title="statement not covered" >        throw new Error(`options.queryParameters must be of type object. It should be a JSON object ` +</span>
          `of "query-parameter-name" as the key and the "query-parameter-value" as the value. ` +
          `The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.`);
      }
      //append question mark if it is not present in the url
<span class="cstat-no" title="statement not covered" >      if (this.url &amp;&amp; this.url.indexOf('?') === -1) {</span>
<span class="cstat-no" title="statement not covered" >        this.url += '?';</span>
      }
      //construct queryString
<span class="cstat-no" title="statement not covered" >      let queryParams = [];</span>
<span class="cstat-no" title="statement not covered" >      let queryParameters = options.queryParameters;</span>
      //We need to populate this.query as a dictionary if the request is being used for Sway's validateRequest(). 
<span class="cstat-no" title="statement not covered" >      this.query = {};</span>
<span class="cstat-no" title="statement not covered" >      for (let queryParamName in queryParameters) {</span>
<span class="cstat-no" title="statement not covered" >        let queryParam = queryParameters[queryParamName];</span>
<span class="cstat-no" title="statement not covered" >        if (queryParam) {</span>
<span class="cstat-no" title="statement not covered" >          if (typeof queryParam === 'string') {</span>
<span class="cstat-no" title="statement not covered" >            queryParams.push(queryParamName + '=' + encodeURIComponent(queryParam));</span>
<span class="cstat-no" title="statement not covered" >            this.query[queryParamName] = encodeURIComponent(queryParam);</span>
          }
<span class="cstat-no" title="statement not covered" >          if (typeof queryParam === 'object') {</span>
<span class="cstat-no" title="statement not covered" >            if (!queryParam.value) {</span>
<span class="cstat-no" title="statement not covered" >              throw new Error(`options.queryParameters[${queryParamName}] is of type "object" but it does not contain a "value" property.`);</span>
            }
<span class="cstat-no" title="statement not covered" >            if (queryParam.skipUrlEncoding) {</span>
<span class="cstat-no" title="statement not covered" >              queryParams.push(queryParamName + '=' + queryParameters[queryParamName]);</span>
<span class="cstat-no" title="statement not covered" >              this.query[queryParamName] = queryParameters[queryParamName];</span>
            } else {
<span class="cstat-no" title="statement not covered" >              queryParams.push(queryParamName + '=' + encodeURIComponent(queryParameters[queryParamName]));</span>
<span class="cstat-no" title="statement not covered" >              this.query[queryParamName] = encodeURIComponent(queryParameters[queryParamName]);</span>
            }
          }
        }
      }//end-of-for
      //append the queryString
<span class="cstat-no" title="statement not covered" >      this.url += queryParams.join('&amp;');</span>
    }
&nbsp;
    //add headers to the request if they are provided
<span class="cstat-no" title="statement not covered" >    if (options.headers) {</span>
<span class="cstat-no" title="statement not covered" >      let headers = options.headers;</span>
<span class="cstat-no" title="statement not covered" >      for (let headerName in headers) {</span>
<span class="cstat-no" title="statement not covered" >        if (headers.hasOwnProperty(headerName)) {</span>
<span class="cstat-no" title="statement not covered" >          this.headers[headerName] = headers[headerName];</span>
        }
      }
    }
    //ensure accept-language is set correctly
<span class="cstat-no" title="statement not covered" >    if (!this.headers['accept-language']) {</span>
<span class="cstat-no" title="statement not covered" >      this.headers['accept-language'] = 'en-US';</span>
    }
    //ensure the request-id is set correctly
<span class="cstat-no" title="statement not covered" >    if (!this.headers['x-ms-client-request-id'] &amp;&amp; !options.disableClientRequestId) {</span>
<span class="cstat-no" title="statement not covered" >      this.headers['x-ms-client-request-id'] = utils.generateUuid();</span>
    }
    //ensure content-type is set correctly
<span class="cstat-no" title="statement not covered" >    if (this.headers['Content-Type'] &amp;&amp;</span>
      typeof this.headers['Content-Type'].valueOf() === 'string' &amp;&amp;
      !this.headers['Content-Type'].endsWith('; charset=utf-8')) {
<span class="cstat-no" title="statement not covered" >      this.headers['Content-Type'] += '; charset=utf-8';</span>
    }
&nbsp;
    //default
<span class="cstat-no" title="statement not covered" >    if (!this.headers['Content-Type']) {</span>
<span class="cstat-no" title="statement not covered" >      this.headers['Content-Type'] = 'application/json; charset=utf-8';</span>
    }
&nbsp;
    //set the request body. request.js automatically sets the Content-Length request header, so we need not set it explicilty
<span class="cstat-no" title="statement not covered" >    this.body = null;</span>
<span class="cstat-no" title="statement not covered" >    if (options.body !== null &amp;&amp; options.body !== undefined) {</span>
      //body as a stream special case. set the body as-is and check for some special request headers specific to sending a stream. 
<span class="cstat-no" title="statement not covered" >      if (options.bodyIsStream) {</span>
<span class="cstat-no" title="statement not covered" >        this.body = options.body;</span>
<span class="cstat-no" title="statement not covered" >        if (!this.headers['Transfer-Encoding']) {</span>
<span class="cstat-no" title="statement not covered" >          this.headers['Transfer-Encoding'] = 'chunked';</span>
        }
<span class="cstat-no" title="statement not covered" >        if (this.headers['Content-Type'] !== 'application/octet-stream') {</span>
<span class="cstat-no" title="statement not covered" >          this.headers['Content-Type'] = 'application/octet-stream';</span>
        }
      } else {
<span class="cstat-no" title="statement not covered" >        let serializedBody = null;</span>
<span class="cstat-no" title="statement not covered" >        if (options.serializationMapper) {</span>
<span class="cstat-no" title="statement not covered" >          serializedBody = serializer.serialize(serializationMapper, options.body, 'requestBody');</span>
        }
<span class="cstat-no" title="statement not covered" >        if (options.disableJsonStringifyOnBody) {</span>
<span class="cstat-no" title="statement not covered" >          this.body = serializedBody || options.body;</span>
        } else {
<span class="cstat-no" title="statement not covered" >          this.body = serializedBody ? JSON.stringify(serializedBody) : JSON.stringify(options.body);</span>
        }
      }
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return this;</span>
  }
}
&nbsp;
module.exports = WebResource;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Sat Apr 22 2017 15:06:01 GMT+0000 (UTC)</div>
</div>
</body>
</html>
